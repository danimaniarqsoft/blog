<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    
    <title>WebFlux best practices | Software development</title>
    <meta name="viewport" content="width=device-width,minimum-scale=1">
    <meta name="description" content="⚛ WebFlux-Specific Best Practices
1. Always Return Mono&lt;T&gt; or Flux&lt;T&gt;
public Mono&lt;User&gt; getUser(String id) {
    return userRepository.findById(id);
}
2. Never Use .block() in Production
User user = userService.getUser().block(); // ❌ Bad
3. Chain Reactive Operators Correctly
return userRepository.findById(id)
    .switchIfEmpty(Mono.error(new UserNotFoundException()))
    .flatMap(this::enrichUser);
4. Use Schedulers When Necessary
Mono.fromCallable(() -&gt; blockingCall())
    .subscribeOn(Schedulers.boundedElastic());
5. Apply Backpressure in Flux
Flux.range(1, 1000)
    .limitRate(100);
6. Handle Errors Reactively
return webClient.get()
    .uri(&#34;/external-api&#34;)
    .retrieve()
    .bodyToMono(String.class)
    .onErrorResume(e -&gt; Mono.just(&#34;default value&#34;));
7. Write Reactive Unit Tests
@Test
void testReactiveStream() {
    Flux&lt;String&gt; flux = Flux.just(&#34;A&#34;, &#34;B&#34;);

    StepVerifier.create(flux)
        .expectNext(&#34;A&#34;)
        .expectNext(&#34;B&#34;)
        .verifyComplete();
}
8. Use Functional Routing for Lightweight APIs
@Bean
public RouterFunction&lt;ServerResponse&gt; route(MyHandler handler) {
    return RouterFunctions.route(GET(&#34;/hello&#34;), handler::hello);
}
">
    <meta name="generator" content="Hugo 0.147.2">
    
    
    
      <meta name="robots" content="index, follow">
    
    <meta name="author" content="Daniel Pichardo">
    

    
<link rel="stylesheet" href="/blog/ananke/css/main.min.d05fb5f317fcf33b3a52936399bdf6f47dc776516e1692e412ec7d76f4a5faa2.css" >




    


    
      
<link rel="shortcut icon" href="/blog/img/favicon.ico" type="image/x-icon" />


    

    

    
      <link rel="canonical" href="https://danimaniarqsoft.github.io/blog/posts/java-reactive-best-practices/">
    

    <meta property="og:url" content="https://danimaniarqsoft.github.io/blog/posts/java-reactive-best-practices/">
  <meta property="og:site_name" content="Software development">
  <meta property="og:title" content="WebFlux best practices">
  <meta property="og:description" content="⚛ WebFlux-Specific Best Practices 1. Always Return Mono&lt;T&gt; or Flux&lt;T&gt; public Mono&lt;User&gt; getUser(String id) { return userRepository.findById(id); } 2. Never Use .block() in Production User user = userService.getUser().block(); // ❌ Bad 3. Chain Reactive Operators Correctly return userRepository.findById(id) .switchIfEmpty(Mono.error(new UserNotFoundException())) .flatMap(this::enrichUser); 4. Use Schedulers When Necessary Mono.fromCallable(() -&gt; blockingCall()) .subscribeOn(Schedulers.boundedElastic()); 5. Apply Backpressure in Flux Flux.range(1, 1000) .limitRate(100); 6. Handle Errors Reactively return webClient.get() .uri(&#34;/external-api&#34;) .retrieve() .bodyToMono(String.class) .onErrorResume(e -&gt; Mono.just(&#34;default value&#34;)); 7. Write Reactive Unit Tests @Test void testReactiveStream() { Flux&lt;String&gt; flux = Flux.just(&#34;A&#34;, &#34;B&#34;); StepVerifier.create(flux) .expectNext(&#34;A&#34;) .expectNext(&#34;B&#34;) .verifyComplete(); } 8. Use Functional Routing for Lightweight APIs @Bean public RouterFunction&lt;ServerResponse&gt; route(MyHandler handler) { return RouterFunctions.route(GET(&#34;/hello&#34;), handler::hello); }">
  <meta property="og:locale" content="en">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2025-05-12T04:14:54-08:00">
    <meta property="article:modified_time" content="2025-05-12T04:14:54-08:00">

  <meta itemprop="name" content="WebFlux best practices">
  <meta itemprop="description" content="⚛ WebFlux-Specific Best Practices 1. Always Return Mono&lt;T&gt; or Flux&lt;T&gt; public Mono&lt;User&gt; getUser(String id) { return userRepository.findById(id); } 2. Never Use .block() in Production User user = userService.getUser().block(); // ❌ Bad 3. Chain Reactive Operators Correctly return userRepository.findById(id) .switchIfEmpty(Mono.error(new UserNotFoundException())) .flatMap(this::enrichUser); 4. Use Schedulers When Necessary Mono.fromCallable(() -&gt; blockingCall()) .subscribeOn(Schedulers.boundedElastic()); 5. Apply Backpressure in Flux Flux.range(1, 1000) .limitRate(100); 6. Handle Errors Reactively return webClient.get() .uri(&#34;/external-api&#34;) .retrieve() .bodyToMono(String.class) .onErrorResume(e -&gt; Mono.just(&#34;default value&#34;)); 7. Write Reactive Unit Tests @Test void testReactiveStream() { Flux&lt;String&gt; flux = Flux.just(&#34;A&#34;, &#34;B&#34;); StepVerifier.create(flux) .expectNext(&#34;A&#34;) .expectNext(&#34;B&#34;) .verifyComplete(); } 8. Use Functional Routing for Lightweight APIs @Bean public RouterFunction&lt;ServerResponse&gt; route(MyHandler handler) { return RouterFunctions.route(GET(&#34;/hello&#34;), handler::hello); }">
  <meta itemprop="datePublished" content="2025-05-12T04:14:54-08:00">
  <meta itemprop="dateModified" content="2025-05-12T04:14:54-08:00">
  <meta itemprop="wordCount" content="107">
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="WebFlux best practices">
  <meta name="twitter:description" content="⚛ WebFlux-Specific Best Practices 1. Always Return Mono&lt;T&gt; or Flux&lt;T&gt; public Mono&lt;User&gt; getUser(String id) { return userRepository.findById(id); } 2. Never Use .block() in Production User user = userService.getUser().block(); // ❌ Bad 3. Chain Reactive Operators Correctly return userRepository.findById(id) .switchIfEmpty(Mono.error(new UserNotFoundException())) .flatMap(this::enrichUser); 4. Use Schedulers When Necessary Mono.fromCallable(() -&gt; blockingCall()) .subscribeOn(Schedulers.boundedElastic()); 5. Apply Backpressure in Flux Flux.range(1, 1000) .limitRate(100); 6. Handle Errors Reactively return webClient.get() .uri(&#34;/external-api&#34;) .retrieve() .bodyToMono(String.class) .onErrorResume(e -&gt; Mono.just(&#34;default value&#34;)); 7. Write Reactive Unit Tests @Test void testReactiveStream() { Flux&lt;String&gt; flux = Flux.just(&#34;A&#34;, &#34;B&#34;); StepVerifier.create(flux) .expectNext(&#34;A&#34;) .expectNext(&#34;B&#34;) .verifyComplete(); } 8. Use Functional Routing for Lightweight APIs @Bean public RouterFunction&lt;ServerResponse&gt; route(MyHandler handler) { return RouterFunctions.route(GET(&#34;/hello&#34;), handler::hello); }">

      
    
	
  </head><body class="ma0 avenir bg-near-white production">

    
   
  

  <header>
    <div class="bg-black">
      <nav class="pv3 ph3 ph4-ns" role="navigation">
  <div class="flex-l center items-center justify-between">
    <a href="/blog/" class="f3 fw2 hover-white white-90 dib no-underline">
      
        Software development
      
    </a>
    <div class="flex-l items-center">
      

      
        <ul class="pl0 mr3">
          
          <li class="list f5 f4-ns fw4 dib pr3">
            <a class="hover-white white-90 no-underline" href="/blog/about/" title=" page">
              
            </a>
          </li>
          
          <li class="list f5 f4-ns fw4 dib pr3">
            <a class="hover-white white-90 no-underline" href="/blog/posts/" title="Posts page">
              Posts
            </a>
          </li>
          
          <li class="list f5 f4-ns fw4 dib pr3">
            <a class="hover-white white-90 no-underline" href="/blog/topics/" title="Topics page">
              Topics
            </a>
          </li>
          
        </ul>
      
      <div class="ananke-socials"></div>

    </div>
  </div>
</nav>

    </div>
  </header>



    <main class="pb7" role="main">
      
  
  
  <article class="flex-l mw8 center ph3 flex-wrap justify-between">
    <header class="mt4 w-100">
      <aside class="instapaper_ignoref b helvetica tracked ttu">
          
        Posts
      </aside><div id="sharing" class="mt3 ananke-socials"></div>
<h1 class="f1 athelas mt3 mb1">WebFlux best practices</h1>
      
      <p class="tracked"><strong>Daniel Pichardo</strong>
      </p>
      
      
      
      <time class="f6 mv4 dib tracked" datetime="2025-05-12T04:14:54-08:00">May 12, 2025</time>
      

      
      
    </header>
    <div class="nested-copy-line-height lh-copy serif f4 nested-links mid-gray pr4-l w-two-thirds-l"><h1 id="-webflux-specific-best-practices">⚛ WebFlux-Specific Best Practices</h1>
<h2 id="1-always-return-monot-or-fluxt">1. Always Return <code>Mono&lt;T&gt;</code> or <code>Flux&lt;T&gt;</code></h2>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">public</span><span class="w"> </span><span class="n">Mono</span><span class="o">&lt;</span><span class="n">User</span><span class="o">&gt;</span><span class="w"> </span><span class="nf">getUser</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">id</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">userRepository</span><span class="p">.</span><span class="na">findById</span><span class="p">(</span><span class="n">id</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span></code></pre></div><h2 id="2-never-use-block-in-production">2. Never Use <code>.block()</code> in Production</h2>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="n">User</span><span class="w"> </span><span class="n">user</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">userService</span><span class="p">.</span><span class="na">getUser</span><span class="p">().</span><span class="na">block</span><span class="p">();</span><span class="w"> </span><span class="c1">// ❌ Bad</span><span class="w">
</span></span></span></code></pre></div><h2 id="3-chain-reactive-operators-correctly">3. Chain Reactive Operators Correctly</h2>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="k">return</span><span class="w"> </span><span class="n">userRepository</span><span class="p">.</span><span class="na">findById</span><span class="p">(</span><span class="n">id</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">.</span><span class="na">switchIfEmpty</span><span class="p">(</span><span class="n">Mono</span><span class="p">.</span><span class="na">error</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">UserNotFoundException</span><span class="p">()))</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">.</span><span class="na">flatMap</span><span class="p">(</span><span class="k">this</span><span class="p">::</span><span class="n">enrichUser</span><span class="p">);</span><span class="w">
</span></span></span></code></pre></div><h2 id="4-use-schedulers-when-necessary">4. Use <code>Schedulers</code> When Necessary</h2>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="n">Mono</span><span class="p">.</span><span class="na">fromCallable</span><span class="p">(()</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">blockingCall</span><span class="p">())</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">.</span><span class="na">subscribeOn</span><span class="p">(</span><span class="n">Schedulers</span><span class="p">.</span><span class="na">boundedElastic</span><span class="p">());</span><span class="w">
</span></span></span></code></pre></div><h2 id="5-apply-backpressure-in-flux">5. Apply Backpressure in Flux</h2>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="n">Flux</span><span class="p">.</span><span class="na">range</span><span class="p">(</span><span class="n">1</span><span class="p">,</span><span class="w"> </span><span class="n">1000</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">.</span><span class="na">limitRate</span><span class="p">(</span><span class="n">100</span><span class="p">);</span><span class="w">
</span></span></span></code></pre></div><h2 id="6-handle-errors-reactively">6. Handle Errors Reactively</h2>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="k">return</span><span class="w"> </span><span class="n">webClient</span><span class="p">.</span><span class="na">get</span><span class="p">()</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">.</span><span class="na">uri</span><span class="p">(</span><span class="s">&#34;/external-api&#34;</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">.</span><span class="na">retrieve</span><span class="p">()</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">.</span><span class="na">bodyToMono</span><span class="p">(</span><span class="n">String</span><span class="p">.</span><span class="na">class</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">.</span><span class="na">onErrorResume</span><span class="p">(</span><span class="n">e</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">Mono</span><span class="p">.</span><span class="na">just</span><span class="p">(</span><span class="s">&#34;default value&#34;</span><span class="p">));</span><span class="w">
</span></span></span></code></pre></div><h2 id="7-write-reactive-unit-tests">7. Write Reactive Unit Tests</h2>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="nd">@Test</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kt">void</span><span class="w"> </span><span class="nf">testReactiveStream</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">Flux</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span><span class="w"> </span><span class="n">flux</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Flux</span><span class="p">.</span><span class="na">just</span><span class="p">(</span><span class="s">&#34;A&#34;</span><span class="p">,</span><span class="w"> </span><span class="s">&#34;B&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">StepVerifier</span><span class="p">.</span><span class="na">create</span><span class="p">(</span><span class="n">flux</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">.</span><span class="na">expectNext</span><span class="p">(</span><span class="s">&#34;A&#34;</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">.</span><span class="na">expectNext</span><span class="p">(</span><span class="s">&#34;B&#34;</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">.</span><span class="na">verifyComplete</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span></code></pre></div><h2 id="8-use-functional-routing-for-lightweight-apis">8. Use Functional Routing for Lightweight APIs</h2>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="nd">@Bean</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kd">public</span><span class="w"> </span><span class="n">RouterFunction</span><span class="o">&lt;</span><span class="n">ServerResponse</span><span class="o">&gt;</span><span class="w"> </span><span class="nf">route</span><span class="p">(</span><span class="n">MyHandler</span><span class="w"> </span><span class="n">handler</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">RouterFunctions</span><span class="p">.</span><span class="na">route</span><span class="p">(</span><span class="n">GET</span><span class="p">(</span><span class="s">&#34;/hello&#34;</span><span class="p">),</span><span class="w"> </span><span class="n">handler</span><span class="p">::</span><span class="n">hello</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span></code></pre></div><ul class="pa0">
  
</ul>
<div class="mt6 instapaper_ignoref">
      
      
      </div>
    </div>

    <aside class="w-30-l mt6-l">




</aside>

  </article>

    </main>
    <footer class="bg-black bottom-0 w-100 pa3" role="contentinfo">
  <div class="flex justify-between">
  <a class="f4 fw4 hover-white white-70 dn dib-ns pv2 ph3 no-underline" href="https://danimaniarqsoft.github.io/blog/" >
    &copy;  Software development 2025 
  </a>
    <div><div class="ananke-socials"></div>
</div>
  </div>
</footer>

  </body>
</html>
